<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>文件上传</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f5f5f5;
      }
      .container {
        max-width: 600px;
        margin: 0 auto;
        padding: 20px;
        background-color: #fff;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, .2);
      }
      h1 {
        margin-top: 0;
        font-size: 32px;
        color: #333;
        text-align: center;
      }
      form {
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      input[type="file"] {
        margin-bottom: 20px;
        font-size: 16px;
        color: #333;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        background-color: #fff;
        box-shadow: 0 0 5px rgba(0, 0, 0, .1);
      }
      button {
        padding: 10px;
        background-color: #4CAF50;
        color: #fff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color .2s;
      }
      button:hover {
        background-color: #3e8e41;
      }
      .result {
        margin-top: 20px;
        padding: 20px;
        background-color: #f1f1f1;
        border-radius: 5px;
        white-space: pre-wrap;
      }
      .progress {
        margin-top: 20px;
        width: 100%;
        height: 20px;
        background-color: #f1f1f1;
        border-radius: 5px;
        overflow: hidden;
        box-shadow: 0 0 5px rgba(0, 0, 0, .1);
      }
      .bar {
        width: 0;
        height: 100%;
        background-color: #4CAF50;
        transition: width .2s;
      }
      .text-box {
      width: 50%;
      padding: 10px;
      margin-bottom: 20px;
      font-size: 16px;
      color: #333;
      border: 1px solid #ccc;
      border-radius: 5px;
      background-color: #fff;
      box-shadow: 0 0 5px rgba(0, 0, 0, .1);
    }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>文件上传</h1>
      <!-- 指定项目地址和端口号，这里需要和启动地址、断开和接口对应 -->
      <form id="upload-form" method="POST" action="http://127.0.0.1:19100/upload" enctype="multipart/form-data">
        <input type="text" name="fileIdentifier" class="text-box" placeholder="输入上传文件的标识码">
        <input type="file" name="file">
        <button type="submit">上传文件</button>
      </form>
      <div class="progress">
        <div class="bar"></div>
      </div>
      <h2>返回结果</h2>
      <div class="result">
        <div id="result-text"></div>
      </div>
      <div>页面生成 power by openai chatGPT-3.5</div>
    </div>
    <script>
      const form = document.querySelector('#upload-form');
      const progressBar = document.querySelector('.bar');
      form.addEventListener('submit', async (event) => {
        event.preventDefault();
        const formData = new FormData(form);
        const xhr = new XMLHttpRequest();
        xhr.upload.addEventListener('progress', (event) => {
          const percent = (event.loaded / event.total) * 100;
          progressBar.style.width = percent + '%';
        });
        xhr.onreadystatechange = () => {
          if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
            progressBar.style.width = '0';
            document.querySelector('#result-text').textContent = xhr.responseText;
          }
        };
        xhr.open(form.method, form.action);
        xhr.send(formData);
      });
    </script>
  </body>
</html>
